// Your stroke data
const numInput = [[[46,109],[46,109],[46,110],[46,113],[46,115],[46,117],[45,120],[45,122],[45,125],[45,127],[45,130],[45,133],[45,134],[45,137],[45,139],[45,141],[45,144],[44,147],[43,149],[43,152],[43,155],[42,157],[41,160],[41,162],[41,165],[41,168],[41,171],[41,173],[40,176],[40,179],[40,181],[40,183],[39,185],[39,189],[39,190],[39,192],[39,193],[39,193],[39,194],[40,195],[40,196],[40,197],[40,197],[40,198],[40,199],[40,200],[40,201],[40,201],[40,203],[40,205],[40,206],[40,207],[41,209],[41,209],[41,210],[41,211],[41,213],[41,213],[41,215],[41,216],[41,217],[41,217],[41,218],[41,219],[42,219],[42,220],[43,220],[44,221],[45,221],[45,221],[47,221],[47,220],[49,220],[49,219],[51,219],[53,218],[54,217],[55,217],[56,217],[57,216],[58,216],[60,216],[61,215],[62,215],[63,215],[64,214],[65,213],[66,213],[68,213],[69,213],[70,212],[71,212],[72,210],[74,210],[76,209],[77,209],[78,209],[80,208],[81,207],[82,207],[84,206],[85,205],[85,205],[87,205],[88,205],[90,205],[92,204],[93,204],[95,204],[97,203],[97,203],[98,203],[100,203],[101,203],[102,203],[103,203],[104,203],[105,203],[106,203],[109,203],[111,203],[113,204],[114,204],[117,204],[118,205],[121,205],[122,205],[123,205],[125,206],[127,206],[129,207],[130,207],[132,208],[133,208],[135,208],[137,209],[139,209],[140,209],[141,209],[142,209],[145,209],[146,209],[147,209],[149,209],[151,209],[153,209],[154,209],[157,209],[157,209],[159,209],[160,209],[161,209],[163,209],[164,208],[165,208],[167,208],[168,207],[170,207],[172,207],[173,207],[176,207],[178,207],[179,207],[181,207],[184,207],[185,207],[187,207],[189,207],[191,207],[193,207],[196,207],[197,208],[199,208],[201,208],[201,208],[204,208],[205,208],[207,208],[209,208],[209,208],[212,209],[213,209],[215,209],[217,209],[217,209],[220,209],[221,209],[223,209],[225,209],[227,209],[228,209],[230,209],[233,209],[233,209],[236,209],[237,209],[239,208],[241,207],[244,207],[245,206],[247,205],[249,205],[251,205],[253,205],[254,204],[257,204],[257,204],[260,203],[261,203],[262,203],[265,203],[267,203],[269,203],[271,203],[273,203],[275,203],[277,203],[280,203],[281,204],[284,205],[285,205],[288,205],[289,205],[291,205],[292,205],[293,205],[295,205],[296,205],[297,205],[298,205],[300,205],[301,205],[301,205],[302,205],[303,205],[305,205],[305,205],[306,205],[308,205],[309,204],[310,204],[311,204],[313,203],[314,202],[316,202],[317,202],[319,201],[321,201],[321,201],[323,201],[325,200],[325,200],[326,200],[327,200],[328,199],[329,199],[329,199],[330,199],[331,199],[332,199],[333,199],[333,199],[335,199],[336,199],[337,199],[338,198],[339,198],[340,198],[341,197],[341,197],[342,197],[343,197],[344,197],[345,197],[345,196],[345,195],[345,194],[346,194],[346,193],[346,192],[347,191],[347,189],[347,188],[347,185],[347,183],[347,181],[347,179],[347,178],[347,177],[347,176],[348,175],[348,173],[348,172],[348,170],[348,169],[348,167],[348,165],[348,165],[348,162],[348,161],[348,159],[348,157],[348,156],[348,154],[348,153],[348,150],[347,149],[347,148],[346,146],[346,145],[345,144],[345,143],[345,142],[345,141],[344,141],[344,140],[343,140],[343,139],[342,137],[341,137],[341,136],[341,134],[339,133],[337,132],[336,130],[335,129],[333,128],[332,127],[330,127],[329,126],[328,126],[326,125],[325,125],[325,125],[324,125],[321,125],[320,125],[317,125],[316,125],[313,125],[311,125],[310,125],[309,126],[306,126],[305,127],[303,128],[301,128],[301,128],[298,128],[297,129],[295,129],[293,129],[291,129],[290,129],[288,129],[286,130],[285,131],[283,131],[282,131],[281,132],[279,132],[277,132],[276,132],[274,132],[273,133],[271,133],[269,133],[267,133],[265,133],[263,133],[261,133],[259,133],[257,133],[257,133],[254,133],[253,133],[251,133],[249,133],[247,133],[245,133],[242,133],[239,133],[237,133],[235,134],[232,134],[231,134],[228,134],[225,134],[222,134],[221,134],[217,134],[215,134],[213,134],[211,134],[209,134],[207,134],[205,133],[203,133],[201,133],[198,132],[196,132],[193,132],[191,131],[188,131],[185,131],[181,131],[177,130],[173,130],[171,130],[169,129],[167,129],[165,129],[164,128],[162,128],[161,128],[161,128],[159,127],[157,127],[156,127],[153,127],[153,127],[152,127],[151,127],[150,127],[149,127],[147,127],[146,127],[145,127],[143,127],[142,127],[141,127],[139,126],[137,125],[136,125],[135,125],[133,123],[132,123],[131,123],[129,122],[127,121],[126,121],[125,120],[124,120],[123,119],[121,118],[119,118],[117,118],[117,117],[114,117],[113,117],[111,117],[109,116],[107,116],[105,116],[104,115],[101,115],[101,115],[98,115],[96,115],[94,114],[92,114],[89,113],[89,113],[87,113],[85,113],[83,112],[81,111],[79,110],[77,109],[75,108],[73,106],[72,105],[70,105],[69,104],[67,102],[65,101],[64,100],[63,100],[62,98],[60,97],[58,96],[57,95],[55,94],[53,93],[52,93],[51,92],[50,91],[49,90],[48,90],[47,90],[46,90],[45,90],[45,90],[44,90],[43,90],[42,90],[42,91],[42,92],[42,93],[42,96],[42,97],[41,101],[41,103],[41,106],[41,108],[41,110],[41,112],[41,113],[41,114],[41,115],[41,116],[41,117],[41,117],[41,118],[42,119],[43,119],[43,121],[43,121],[43,122],[44,123],[44,125],[44,125],[44,127],[44,129]],[[201,172],[201,172],[198,180],[192,191],[188,199],[184,205],[180,211],[176,216],[173,222],[169,225],[166,228],[165,230],[162,232],[160,233],[157,233],[157,233],[154,233],[153,233],[152,233],[151,233],[150,233],[148,233],[145,233],[143,233],[142,233],[140,233],[137,233],[137,234],[134,235],[132,236],[130,237],[129,237],[127,239],[125,241],[123,242],[121,245],[120,246],[117,247],[116,249],[114,250],[113,252],[113,253],[113,253],[112,254],[112,255],[112,256],[111,257],[111,257],[111,258],[111,259],[112,259],[112,260],[113,261],[113,261],[114,261],[115,261],[117,262],[117,262],[118,263],[119,263],[121,264],[124,265],[126,265],[128,265],[131,265],[134,265],[137,265],[140,265],[143,265],[145,266],[149,267],[150,267],[153,267],[155,267],[157,267],[159,267],[161,267],[163,268],[165,268],[168,268],[170,268],[173,268],[177,268],[180,268],[182,268],[184,268],[187,268],[189,268],[193,268],[193,268],[196,267],[199,267],[201,267],[204,266],[205,265],[209,265],[211,265],[213,264],[214,263],[217,263],[218,262],[220,262],[222,262],[223,261],[225,261],[226,261],[228,261],[229,261],[231,261],[233,261],[233,260],[234,260],[235,259],[236,258],[237,257],[237,257],[238,255],[239,253],[240,252],[241,251],[241,249],[243,246],[244,245],[245,243],[246,241],[248,239],[249,237],[250,235],[252,234],[252,233],[253,231],[255,229],[257,228],[258,225],[259,224],[261,221],[262,218],[263,215],[265,213],[265,210],[267,207],[267,205],[268,201],[269,199],[269,197],[269,196],[270,193],[270,192],[271,190],[271,189],[272,188],[272,186],[273,186],[273,185],[273,184],[273,183],[273,182]],[[251,128],[249,128],[247,128],[243,127],[241,127],[237,126],[234,125],[231,124],[229,122],[225,120],[222,118],[219,116],[217,114],[216,113],[214,111],[212,109],[210,109],[209,108],[208,107],[206,105],[205,105],[204,104],[203,104],[201,104],[201,103],[200,103],[199,103],[197,102],[197,101],[196,101],[194,101],[193,101],[192,99],[189,98],[188,97],[187,97],[185,96],[184,96],[182,95],[181,94],[180,94],[180,93],[178,93],[177,93],[177,93],[176,93],[175,93],[174,93],[173,93],[173,94],[172,94],[171,94],[170,94],[169,94],[169,95],[168,96],[167,96],[166,96],[165,97],[164,97],[161,97],[161,97],[159,97],[157,98],[157,98],[155,98],[154,98],[153,98],[153,99],[152,99],[151,100],[150,100],[149,101],[149,101],[148,101],[148,102],[147,102],[146,102],[146,103],[145,103],[145,103],[144,103],[144,104],[144,105],[144,105],[144,106],[144,107],[144,108],[145,109],[145,109],[145,110],[146,111],[147,112],[148,112],[148,113],[149,113],[149,113],[149,114],[150,115],[151,116],[152,116],[153,116],[153,116],[153,117],[154,117],[155,117],[156,117],[157,117],[157,117],[157,118],[157,119],[158,119],[160,120],[160,121],[160,121],[161,121],[161,121],[162,122],[162,123],[162,124],[163,124],[164,124],[164,125],[165,125],[165,125],[165,125],[166,125],[166,126]]];


// Convert to image
const result = strokeToImage(numInput);

// Now result.image is your 28x28 pixel array
// and result.flattened is your 1x784 array

// If you need the flattened array as a specific type (e.g., Float32Array)
const float32Array = new Float32Array(result.flattened);

// If you want to visualize the result
printImage(result.image);

// If you need to save the image, you can use canvas in the browser:
function saveAsImage(imageData) {
    const canvas = document.createElement('canvas');
    canvas.width = 28;
    canvas.height = 28;
    const ctx = canvas.getContext('2d');
    const imgData = ctx.createImageData(28, 28);

    for (let i = 0; i < imageData.flat().length; i++) {
        const value = imageData.flat()[i] * 255;
        imgData.data[i * 4] = value;     // R
        imgData.data[i * 4 + 1] = value; // G
        imgData.data[i * 4 + 2] = value; // B
        imgData.data[i * 4 + 3] = 255;   // A
    }

    ctx.putImageData(imgData, 0, 0);
    return canvas.toDataURL();
}

